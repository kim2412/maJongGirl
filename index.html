<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>마종걸용 테니스 레슨 정산 시스템!</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- 로그인 화면 -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <div class="login-card">
                <h1>나의 테니스 레슨 정산 시스템</h1>
                <p class="login-subtitle">비밀번호를 입력해주세요</p>
                <div class="login-form">
                    <input type="password" id="passwordInput" placeholder="비밀번호 입력" onkeypress="handlePasswordEnter(event)">
                    <p id="passwordError" class="password-error"></p>
                    <button class="btn btn-primary login-btn" onclick="checkPassword()">로그인</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 메인 콘텐츠(로그인 시 표시) -->
    <div id="mainContent" class="main-content" style="display: none;">
    <div class="hero-section">
        <div class="hero-content">
            <div class="hero-text">
                <h1>나의 테니스 레슨 정산 시스템</h1>
                <p class="subtitle">(ps.마종걸최세야!!)</p>
            </div>
            <div class="hero-image">
                <img src="images/hero-image.jpg" alt="맹이ㅋ" class="hero-img">
            </div>
        </div>
    </div>
    
    <div class="container">
        <!-- 상단 헤더 -->
        <div class="page-header">
            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('salary')">💰 월급정산</button>
                <button class="tab-btn" onclick="switchTab('admin')">⚙️ 관리자 설정</button>
                <button class="help-btn-inline" onclick="showHelp()" title="도움말">
                    <span class="help-icon">❓</span>
                    <span class="help-text-inline">설명</span>
                </button>
                <!-- 회원관리와 레슨관리 탭은 숨김 (필요시 나중에 활성화) -->
                <!-- <button class="tab-btn" onclick="switchTab('members')">👥 회원관리</button> -->
                <!-- <button class="tab-btn" onclick="switchTab('lessons')">🎾 레슨관리</button> -->
            </div>
        </div>

        <!-- 도움말 팝업 -->
        <div id="helpPopup" class="help-popup" onclick="closeHelpOnBackdrop(event)">
            <div class="help-popup-content">
                <div class="help-popup-header">
                    <h2>📖 사용 설명서!!</h2>
                    <button class="help-close-btn" onclick="closeHelp()">×</button>
                </div>
                <div class="help-popup-body">
                    <div class="help-section">
                        <h3>💰 월급정산</h3>
                        <p>시작일과 종료일을 선택한 후, 달력에서 각 날짜별로 오전/오후 레슨 횟수를 입력</p>
                        <p>자동으로 총 레슨 횟수와 금액이 계산되며, 3.3% 소득공제 금액도 함께 표시!!</p>
                        <p>정산완료하면 가장 아래 부분에 목록으로 정산한 목록 나오니깐 그거 상세보기하면 더 자세히 이전에 정산한 내용도 볼수있단다!!</p>
                    </div>
                    <div class="help-section">
                        <h3>⚙️ 관리자 설정</h3>
                        <p>레슨비 설정: 1타임당 레슨비를 설정, 월급정산 계산에 사용됩니당!</p>
                        <p>데이터 관리: 전체 삭제, 데이터 내보내기, 데이터 가져오기 기능 (사용 주의!)</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 정산 상세보기 팝업 -->
        <div id="settlementDetailPopup" class="settlement-popup" onclick="closeSettlementDetailOnBackdrop(event)">
            <div class="settlement-popup-content">
                <div class="settlement-popup-header">
                    <h2 id="settlementPopupTitle">📊 정산 상세 내역</h2>
                    <button class="settlement-close-btn" onclick="closeSettlementDetail()">×</button>
                </div>
                <div class="settlement-popup-body" id="settlementDetailContent">
                    <!-- 동적으로 내용이 채워짐 -->
                </div>
            </div>
        </div>

        <!-- 월급정산 탭 -->
        <div id="salary-tab" class="tab-content active">
            <!-- 정산 기간 선택 -->
            <section class="card">
                <div class="card-header">
                    <h2>💰 월급정산</h2>
                    <p class="card-description">정산 기간을 선택하고, 달력에서 각 날짜별로 오전/오후 레슨 횟수를 입력하세요.</p>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="settlementStartDate">
                            <span class="label-text">시작 일자</span>
                            <span class="required-mark">*</span>
                        </label>
                        <input type="date" id="settlementStartDate">
                        <small class="help-text">정산 시작 날짜를 선택하세요</small>
                    </div>
                    <div class="form-group">
                        <label for="settlementEndDate">
                            <span class="label-text">종료 일자</span>
                            <span class="required-mark">*</span>
                        </label>
                        <input type="date" id="settlementEndDate">
                        <small class="help-text">정산 종료 날짜를 선택하세요</small>
                    </div>
                </div>
                <div class="button-group">
                    <button class="btn btn-primary btn-large" onclick="generateCalendar()">
                        <span class="btn-icon">📅</span>
                        달력 생성
                    </button>
                </div>
            </section>

            <!-- 달력 입력 영역 -->
            <section id="calendarSection" class="card" style="display: none;">
                <div class="card-header">
                    <h2>📅 레슨 입력</h2>
                    <p class="card-description">각 날짜별로 오전/오후 레슨 횟수를 입력하세요.</p>
                </div>
                <div id="calendarContainer" class="calendar-container"></div>
                <div id="settlementSummary" class="settlement-summary"></div>
                <div class="button-group" style="margin-top: 20px;">
                    <button class="btn btn-success btn-large" onclick="saveManualSettlement()">
                        <span class="btn-icon">💾</span>
                        정산 저장
                    </button>
                </div>
            </section>

            <!-- 정산 기록 목록 -->
            <section class="card">
                <div class="card-header">
                    <h2>📋 정산 기록 목록</h2>
                    <p class="card-description">이전에 저장한 정산 기록을 확인하고 수정할 수 있습니다. "상세보기" 버튼을 클릭하면 날짜별 상세 내역과 시각화를 확인할 수 있습니다.</p>
                </div>
                <div id="salaryRecordsList" class="salary-records-list"></div>
            </section>
        </div>

        <!-- 관리자 설정 탭 -->
        <div id="admin-tab" class="tab-content">
            <!-- 레슨비 설정 -->
            <section class="card">
                <div class="card-header">
                    <h2>⚙️ 레슨비 설정</h2>
                    <p class="card-description">1타임당 레슨비를 설정하세요. 월급정산 계산에 사용됩니다.</p>
                </div>
                <div class="form-group">
                    <label for="lessonPrice">
                        <span class="label-text">1타임당 레슨비</span>
                        <span class="currency">(원)</span>
                    </label>
                    <div class="input-with-btn">
                        <input type="text" id="lessonPrice" placeholder="예: 20,000" min="0" inputmode="numeric" onchange="validatePrice(this)">
                        <button class="btn btn-primary" onclick="saveLessonPrice()">
                            <span class="btn-icon">💾</span>
                            저장
                        </button>
                    </div>
                    <small class="help-text">1타임당 레슨비를 입력하세요 (정산 시 사용)</small>
                    <div id="priceDisplay" class="info-display success-info"></div>
                </div>
            </section>

            <!-- 데이터 관리 -->
            <section class="card">
                <div class="card-header">
                    <h2>💾 데이터 관리</h2>
                    <p class="card-description">데이터를 백업하거나 복원할 수 있습니다.</p>
                </div>
                <div class="button-group">
                    <button class="btn btn-secondary" onclick="clearAllData()">전체 삭제</button>
                    <button class="btn btn-secondary" onclick="exportData()">데이터 내보내기</button>
                    <button class="btn btn-secondary" onclick="importData()">데이터 가져오기</button>
                </div>
                <input type="file" id="importFile" accept=".json" style="display: none;" onchange="handleFileImport(event)">
                <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; font-size: 0.9rem; color: #6c757d;">
                    <p><strong>💡 안내:</strong></p>
                    <p>• 데이터 내보내기: 현재 모든 데이터를 JSON 파일로 저장합니다.</p>
                    <p>• 데이터 가져오기: 이전에 내보낸 JSON 파일을 불러와 복원합니다.</p>
                    <p>• 전체 삭제: 모든 데이터를 영구적으로 삭제합니다. 신중히 사용하세요.</p>
                </div>
            </section>
        </div>

        <!-- 회원관리 탭 (비활성화됨) -->
        <div id="members-tab" class="tab-content" style="display: none;">
            <!-- 기존 회원관리 코드는 유지 (필요시 나중에 활성화) -->
        </div>

        <!-- 레슨관리 탭 (비활성화됨) -->
        <div id="lessons-tab" class="tab-content" style="display: none;">
            <!-- 기존 레슨관리 코드는 유지 (필요시 나중에 활성화) -->
        </div>
    </div>
    </div>

    <script src="app.js"></script>
</body>
</html>

